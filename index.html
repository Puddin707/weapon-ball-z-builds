<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Weapon Ball Z - Christmas Edition üéÑ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  
  <style>
    /* --- C·∫§U H√åNH C∆† B·∫¢N --- */
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0b1026; /* N·ªÅn xanh ƒë·∫≠m h∆°n cho n·ªïi b·∫≠t tuy·∫øt */
      color: #f5f5f5;
      overflow-x: hidden; /* ·∫®n thanh cu·ªôn ngang do tuy·∫øt r∆°i */
      position: relative;
    }

    /* --- HI·ªÜU ·ª®NG TUY·∫æT R∆†I (CSS) --- */
    .snowflake {
      position: fixed;
      top: -10px;
      color: #fff;
      font-size: 1em;
      opacity: 0.8;
      pointer-events: none; /* ƒê·ªÉ tuy·∫øt kh√¥ng che n√∫t b·∫•m */
      z-index: 9999;
      animation: fall linear forwards;
    }
    @keyframes fall {
      to { transform: translateY(105vh); }
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 24px 16px 48px;
      position: relative;
      z-index: 1; /* ƒê·ªÉ n·ªôi dung n·∫±m tr√™n tuy·∫øt background n·∫øu c·∫ßn */
    }

    /* --- HEADER --- */
    header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 24px;
    }
    header img {
      width: 72px;
      height: 72px;
      border-radius: 16px;
      object-fit: cover;
      background: #222;
      border: 2px solid #d42426; /* Vi·ªÅn ƒë·ªè gi√°ng sinh */
    }
    h1 {
      margin: 0 0 4px;
      font-size: 1.8rem;
      /* Hi·ªáu ·ª©ng ch·ªØ m√†u Gradient gi√°ng sinh */
      background: linear-gradient(to right, #ff4b4b, #fff, #2ea043);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 800;
    }
    .subtitle {
      opacity: 0.8;
      font-size: 0.95rem;
      color: #a8b8ff;
    }

    /* --- DOWNLOAD BOX --- */
    .download-box {
      margin: 24px 0;
      padding: 20px 24px;
      border-radius: 20px;
      /* N·ªÅn t·ªëi k·∫øt h·ª£p vi·ªÅn Gradient ƒê·ªè - Xanh */
      background: rgba(16, 21, 40, 0.8);
      border: 2px solid transparent;
      background-image: linear-gradient(#101528, #101528), linear-gradient(135deg, #d42426, #2ea043);
      background-origin: border-box;
      background-clip: content-box, border-box;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      text-align: center; /* CƒÉn gi·ªØa n·ªôi dung cho ƒë·∫πp */
    }
    .btn-download {
      display: inline-block;
      margin-top: 16px;
      padding: 12px 24px;
      border-radius: 999px;
      text-decoration: none;
      /* N√∫t m√†u ƒê·ªè Gi√°ng Sinh */
      background: linear-gradient(to bottom, #ff4b4b, #d42426);
      color: #fff;
      font-weight: 700;
      font-size: 1rem;
      box-shadow: 0 4px 15px rgba(212, 36, 38, 0.4);
      transition: transform 0.2s;
    }
    .btn-download:hover {
      filter: brightness(1.1);
      transform: scale(1.05);
    }
    .changelog {
      margin-top: 12px;
      font-size: 0.9rem;
      opacity: 0.9;
      white-space: pre-line;
      text-align: left;
      background: rgba(255, 255, 255, 0.05);
      padding: 10px;
      border-radius: 8px;
    }
    .download-count {
      margin-top: 12px;
      font-size: 0.85rem;
      opacity: 0.7;
    }

    /* --- SOCIAL LINKS --- */
    .social-links {
      margin-top: 32px;
      text-align: center;
      margin-bottom: 40px;
    }
    .social-links h2 {
      font-size: 1.2rem;
      margin-bottom: 16px;
      color: #ffde59; /* M√†u v√†ng ·∫•m √°p */
    }
    .social-links a {
      margin: 0 10px;
      color: #f5f5f5;
      font-size: 1rem;
      text-decoration: none;
      opacity: 0.9;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s;
      background: rgba(255,255,255,0.05);
      padding: 8px 16px;
      border-radius: 50px;
      margin-bottom: 8px;
    }
    .social-links a:hover {
      opacity: 1;
      background: rgba(255,255,255,0.15);
      transform: translateY(-2px);
    }
    .social-links i { font-size: 20px; }
    
    /* M√†u icon */
    .fa-discord { color: #5865F2; }
    .fa-youtube { color: #FF0000; }
    .fa-tiktok { color: #fff; text-shadow: 1px 1px #000; }
    .fa-mug-hot { color: #FF5E5B; }

    /* --- SCREENSHOTS (D·ªåC / PORTRAIT) --- */
    .screenshots h2 {
      font-size: 1.3rem;
      margin-bottom: 16px;
      text-align: center;
    }
    .shot-grid {
      display: flex;
      justify-content: center; /* CƒÉn gi·ªØa n·∫øu m√†n h√¨nh l·ªõn */
      gap: 16px;
      flex-wrap: wrap; /* T·ª± xu·ªëng d√≤ng n·∫øu h·∫øt ch·ªó */
    }
    .shot-grid img {
      /* Ch·ªânh s·ª≠a ƒë·ªÉ ·∫£nh th√†nh d·∫°ng D·ªåC */
      width: 220px; /* Chi·ªÅu r·ªông c·ªë ƒë·ªãnh gi·ªëng ƒëi·ªán tho·∫°i */
      aspect-ratio: 9/16; /* T·ªâ l·ªá chu·∫©n m√†n h√¨nh ƒëi·ªán tho·∫°i d·ªçc */
      object-fit: cover;
      border-radius: 12px;
      border: 2px solid #ffffff22;
      background: #1a1f35;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
      transition: transform 0.3s;
    }
    .shot-grid img:hover {
      transform: translateY(-5px); /* Hi·ªáu ·ª©ng nh·∫•c l√™n khi di chu·ªôt */
      border-color: #4b6fff;
    }

    /* Responsive cho m√†n h√¨nh nh·ªè (Mobile) */
    @media (max-width: 600px) {
      .shot-grid {
        justify-content: flex-start; /* CƒÉn tr√°i ƒë·ªÉ cu·ªôn */
        flex-wrap: nowrap; /* Kh√¥ng xu·ªëng d√≤ng */
        overflow-x: auto; /* Cho ph√©p cu·ªôn ngang */
        padding-bottom: 16px;
        /* ·∫®n thanh cu·ªôn cho ƒë·∫πp */
        scrollbar-width: none; 
      }
      .shot-grid::-webkit-scrollbar {
        display: none;
      }
      .shot-grid img {
        width: 180px; /* Thu nh·ªè ch√∫t tr√™n mobile */
        flex-shrink: 0; /* Kh√¥ng b·ªã co l·∫°i */
      }
    }

    footer {
      margin-top: 60px;
      text-align: center;
      font-size: 0.8rem;
      opacity: 0.6;
      padding-bottom: 20px;
    }
  </style>
</head>
<body>

  <div id="snow-container"></div>

  <div class="container">
    <header>
      <img src="images/icon.png" alt="WBZ" onerror="this.src='https://placehold.co/72x72/222a55/FFF?text=Icon'" />
      <div>
        <h1>Weapon Ball Z üéÖ</h1>
        <div class="subtitle">
          Simulation Weapon Ball Games
        </div>
      </div>
    </header>

    <section class="download-box">
      <div>üì¶ Latest version: <strong id="versionText" style="color: #ffde59;">Checking...</strong></div>
      <div class="changelog" id="changelog">
        Loading update notes...
      </div>

      <a class="btn-download"
         id="downloadLink"
         href="#">
        ‚¨áÔ∏è Download APK
      </a>

      <div class="download-count" id="downloadCount">
        Downloads: ...
      </div>
    </section>

    <section class="social-links">
      <h2>üéÅ Join the Community</h2>
      <a href="https://discord.gg/4EuacCHqCG" target="_blank">
        <i class="fa-brands fa-discord"></i> Discord
      </a>
      <a href="https://youtube.com/@weaponballz" target="_blank">
        <i class="fa-brands fa-youtube"></i> YouTube
      </a>
      <a href="https://www.tiktok.com/@weaponballz" target="_blank">
        <i class="fa-brands fa-tiktok"></i> TikTok
      </a>
      <a href="https://ko-fi.com/hyntezlegolas" target="_blank">
        <i class="fa-solid fa-mug-hot"></i> Support
      </a>
    </section>

    <section class="screenshots">
      <h2>üì∏ Screenshots</h2>
      <div class="shot-grid">
        <img src="https://placehold.co/225x400/222a55/FFF?text=Screen+1" alt="Screenshot 1" />
        <img src="https://placehold.co/225x400/222a55/FFF?text=Screen+2" alt="Screenshot 2" />
        <img src="https://placehold.co/225x400/222a55/FFF?text=Game+Play" alt="Screenshot 3" />
      </div>
    </section>

    <footer>
      ¬© 2025 Weapon Ball Z. Merry Christmas! ‚ùÑÔ∏è
    </footer>
  </div>

  <script>
    // --- 1. SCRIPT L·∫§Y TH√îNG TIN GITHUB (GI·ªÆ NGUY√äN) ---
    async function updateFromLatestRelease() {
      try {
        const [latestRes, allRes] = await Promise.all([
          fetch("https://api.github.com/repos/Puddin707/weapon-ball-z-builds/releases/latest"),
          fetch("https://api.github.com/repos/Puddin707/weapon-ball-z-builds/releases?per_page=100")
        ]);

        if (!latestRes.ok) return;

        const latest = await latestRes.json();
        const allReleases = allRes.ok ? await allRes.json() : [];

        const version = latest.tag_name || "v1.0.0";
        const apkAsset = latest.assets.find(a => a.name.endsWith(".apk")) || latest.assets[0];

        const versionEl    = document.getElementById("versionText");
        const linkEl       = document.getElementById("downloadLink");
        const changelogEl  = document.getElementById("changelog");
        const downloadEl   = document.getElementById("downloadCount");

        if (versionEl) versionEl.textContent = version;

        if (linkEl && apkAsset && apkAsset.browser_download_url) {
          linkEl.href = apkAsset.browser_download_url;
        }

        if (changelogEl && latest.body) {
          changelogEl.textContent = latest.body;
        }

        if (downloadEl) {
          let totalDownloads = 0;
          const releasesList = Array.isArray(allReleases) ? allReleases : (latest.assets ? [latest] : []);
          
          for (const rel of releasesList) {
            if (!rel.assets) continue;
            for (const a of rel.assets) {
              if (typeof a.download_count === "number") {
                totalDownloads += a.download_count;
              }
            }
          }
          downloadEl.textContent = "Downloads: " + totalDownloads;
        }
      } catch (e) {
        console.log("Failed to fetch release info:", e);
      }
    }
    updateFromLatestRelease();

    // --- 2. SCRIPT T·∫†O HI·ªÜU ·ª®NG TUY·∫æT R∆†I (M·ªöI) ---
    function createSnowflake() {
      const snowflake = document.createElement('div');
      snowflake.classList.add('snowflake');
      snowflake.innerHTML = '‚ùÑ'; // K√Ω t·ª± b√¥ng tuy·∫øt
      
      // Random v·ªã tr√≠ b·∫Øt ƒë·∫ßu (tr√°i -> ph·∫£i)
      snowflake.style.left = Math.random() * 100 + 'vw';
      
      // Random k√≠ch th∆∞·ªõc
      snowflake.style.fontSize = (Math.random() * 10 + 10) + 'px';
      
      // Random th·ªùi gian r∆°i (3s ƒë·∫øn 8s)
      const duration = Math.random() * 5 + 3;
      snowflake.style.animationDuration = duration + 's';
      
      // Th√™m v√†o body
      document.body.appendChild(snowflake);
      
      // X√≥a sau khi r∆°i xong ƒë·ªÉ tr√°nh n·∫∑ng m√°y
      setTimeout(() => {
        snowflake.remove();
      }, duration * 1000);
    }

    // T·∫°o tuy·∫øt m·ªói 300ms
    setInterval(createSnowflake, 300);
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WBZ - Hall of Fame üé®</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  
  <style>
    /* --- STYLE C∆† B·∫¢N (GI·ªêNG INDEX) --- */
    body {
      margin: 0; font-family: system-ui, -apple-system, sans-serif;
      background: radial-gradient(circle at top, #1a2344, #050814);
      color: #f5f5f5; min-height: 100vh; overflow-x: hidden;
    }
    .snowflake {
      position: fixed; top: -10px; color: #fff; pointer-events: none; z-index: 9999;
      animation: fall linear forwards; text-shadow: 0 0 5px rgba(255,255,255,0.8);
    }
    @keyframes fall { to { transform: translateY(105vh); } }

    .container { max-width: 1000px; margin: 0 auto; padding: 20px 16px 48px; position: relative; z-index: 1; }

    /* MENU */
    .main-nav {
      display: flex; justify-content: center; gap: 10px; margin-bottom: 32px;
      background: rgba(255, 255, 255, 0.05); padding: 8px; border-radius: 99px;
      backdrop-filter: blur(10px); width: fit-content; margin-left: auto; margin-right: auto;
      border: 1px solid rgba(255,255,255,0.1);
    }
    .main-nav a {
      text-decoration: none; color: #a8b8ff; padding: 8px 20px; border-radius: 99px;
      font-weight: 600; transition: all 0.3s; font-size: 0.95rem;
    }
    .main-nav a:hover { background: rgba(255,255,255,0.1); color: #fff; }
    .main-nav a.active {
      background: linear-gradient(135deg, #4b6fff, #222a55); color: #fff;
      box-shadow: 0 4px 15px rgba(75, 111, 255, 0.3);
    }

    h1 { text-align: center; margin-bottom: 8px; font-size: 2rem; color: #ffde59; text-shadow: 0 4px 10px rgba(0,0,0,0.5); }
    .subtitle { text-align: center; color: #a8b8ff; margin-bottom: 40px; }

    /* --- FAN ART GRID --- */
    .art-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 16px;
    }

    .art-item {
      position: relative;
      border-radius: 12px;
      overflow: hidden;
      aspect-ratio: 1/1; /* ·∫¢nh vu√¥ng */
      cursor: pointer;
      background: #000;
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .art-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(75, 111, 255, 0.4);
      z-index: 2;
    }
    .art-item img {
      width: 100%; height: 100%; object-fit: cover;
      transition: transform 0.5s;
    }
    .art-item:hover img { transform: scale(1.1); }

    /* LOADING & ERROR */
    .loading-text { text-align: center; width: 100%; color: #888; grid-column: 1 / -1; }

    /* --- LIGHTBOX (XEM ·∫¢NH TO) --- */
    .lightbox {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.9); z-index: 10000;
      display: none; align-items: center; justify-content: center;
      opacity: 0; transition: opacity 0.3s;
    }
    .lightbox.show { display: flex; opacity: 1; }
    .lightbox img {
      max-width: 90%; max-height: 90%; border-radius: 8px;
      box-shadow: 0 0 50px rgba(255,255,255,0.1);
    }
    .close-lb {
      position: absolute; top: 20px; right: 30px; color: #fff;
      font-size: 2rem; cursor: pointer;
    }

    /* --- SUBMIT BUTTON --- */
    .submit-section {
      text-align: center; margin: 40px 0;
      padding: 20px; background: rgba(255,255,255,0.05); border-radius: 16px;
    }
    .btn-submit {
      display: inline-block; padding: 12px 24px; background: #ff4444;
      color: white; text-decoration: none; border-radius: 99px;
      font-weight: bold; transition: 0.3s; margin-top: 10px;
    }
    .btn-submit:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(255, 68, 68, 0.4); }

    /* --- COMMENT SECTION (GISCUS) --- */
    .comments-section {
      margin-top: 60px;
      padding-top: 20px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    .comments-title { text-align: center; margin-bottom: 20px; color: #fff; }

  </style>
</head>
<body>
  <div id="snow-container"></div>

  <div class="container">
    <nav class="main-nav">
      <a href="index.html"><i class="fa-solid fa-house"></i> Home</a>
      <a href="tierlist.html"><i class="fa-solid fa-ranking-star"></i> Tier Maker</a>
      <a href="fanart.html" class="active"><i class="fa-solid fa-palette"></i> Fan Art</a>
    </nav>

    <h1>Community Gallery</h1>
    <div class="subtitle">Best arts from Weapon Ball Z players</div>

    <div class="art-grid" id="artGrid">
      <div class="loading-text">Loading wonderful arts... <i class="fa-solid fa-spinner fa-spin"></i></div>
    </div>

    <div class="submit-section">
      <h3>Want to see your art here?</h3>
      <p style="color: #aaa; margin-bottom: 15px;">Join our Discord and post in #fan-art channel!</p>
      <a href="https://discord.gg/4EuacCHqCG" target="_blank" class="btn-submit">
        <i class="fa-brands fa-discord"></i> Submit on Discord
      </a>
    </div>

    <div class="comments-section">
      <h2 class="comments-title"><i class="fa-regular fa-comments"></i> Discussion</h2>
      
      <div class="giscus"></div>
      
    </div>

    <footer style="text-align: center; margin-top: 40px; color: #888; font-size: 0.8rem;">
      ¬© 2025 Weapon Ball Z. <br> Made with ‚ùÑÔ∏è for Gamers.
    </footer>
  </div>

  <div class="lightbox" id="lightbox" onclick="closeLightbox()">
    <div class="close-lb">&times;</div>
    <img id="lb-img" src="" alt="Full Art">
  </div>

  <script>
    // --- 1. CONFIG LOAD ·∫¢NH T·ª∞ ƒê·ªòNG ---
    const githubUser = 'Puddin707';
    const githubRepo = 'weapon-ball-z-builds';
    const folderPath = 'images/fanart'; // Nh·ªõ t·∫°o folder n√†y tr√™n Github
    const grid = document.getElementById('artGrid');

    async function loadFanArt() {
      try {
        const response = await fetch(`https://api.github.com/repos/${githubUser}/${githubRepo}/contents/${folderPath}`);
        if (!response.ok) throw new Error('No images found');
        const data = await response.json();
        
        // L·ªçc l·∫•y file ·∫£nh
        const images = data.filter(file => file.name.match(/\.(png|jpg|jpeg|gif|webp)$/i));

        grid.innerHTML = ''; // X√≥a loading

        if (images.length === 0) {
            grid.innerHTML = '<div class="loading-text">No arts yet. Be the first! üé®</div>';
            return;
        }

        images.forEach(file => {
          const div = document.createElement('div');
          div.className = 'art-item';
          // D√πng download_url ƒë·ªÉ l·∫•y link ·∫£nh g·ªëc
          div.onclick = () => openLightbox(file.download_url);
          
          const img = document.createElement('img');
          img.src = file.download_url; // Load tr·ª±c ti·∫øp
          img.loading = "lazy"; // T·ªëi ∆∞u t·ªëc ƒë·ªô
          
          div.appendChild(img);
          grid.appendChild(div);
        });

      } catch (err) {
        console.error(err);
        grid.innerHTML = '<div class="loading-text" style="color:#ff5555">Could not load arts from server.</div>';
      }
    }

    // --- 2. LIGHTBOX LOGIC ---
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lb-img');

    function openLightbox(src) {
      lbImg.src = src;
      lb.classList.add('show');
    }
    function closeLightbox() {
      lb.classList.remove('show');
      setTimeout(() => lbImg.src = '', 300);
    }

    // --- 3. SNOW EFFECT ---
    function createSnow() {
      const s = document.createElement('div'); s.className='snowflake'; s.innerHTML='‚ùÑ';
      s.style.left=Math.random()*100+'vw'; s.style.fontSize=(Math.random()*10+8)+'px';
      s.style.animationDuration=(Math.random()*5+5)+'s'; s.style.opacity=Math.random();
      document.body.appendChild(s); setTimeout(()=>s.remove(),10000);
    }
    setInterval(createSnow, 200);

    // CH·∫†Y H√ÄM LOAD ·∫¢NH
    loadFanArt();
  </script>

  <script src="https://giscus.app/client.js"
        data-repo="Puddin707/weapon-ball-z-builds"
        data-repo-id="R_kgDONa7mUw" 
        data-category="General"
        data-category-id="DIC_kwDONa7mU84Ck9_p"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="dark"
        data-lang="en"
        crossorigin="anonymous"
        async>
  </script>
</body>
</html>
